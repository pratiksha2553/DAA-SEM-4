<html>

<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <!--jQuery library-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <!--Latest compiled and minified JavaScript-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="order.css" type="text/css">
    <title>Order</title>
    <script src="cart.js" async></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const addToCartButtons = document.querySelectorAll('.addToCartbutton button');
    
            function addToCartClicked(event) {
                const button = event.target;
                const shopItem = button.parentElement.parentElement;
                const title = shopItem.querySelector(".item-title").innerText;
                const price = shopItem.querySelector(".item-price").innerText;
                const total = parseFloat(document.getElementsByClassName("cart-total-price")[0].innerText.replace('₹', ""));
       
              
                fetch('http://localhost:8080/addToCartitems', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        name: title,
                        price: price,
                        total:total,
                
                    }),
                })
            
                .then(response => response.json())
                .then(data => {
                    console.log('Item added to cart:', data);
                    // You might update the UI to reflect the added item if needed
                })
                .catch(error => {
                    console.error('Error adding item to cart:', error);
                });
            }
            function sendCartItemToServer(title, price,total) {
               
                const request={  name: title,
  price: price,
  total:total,
   }         
   localStorage.setItem("total",request)
   
                console.log(total, )
  fetch('http://localhost:8080/addToCartitems', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(request
   ),
  })
  .then(response => response.json())
  .then(data => {
    console.log('Item added to cart:', data);
    // You might update the UI to reflect the added item if needed
  })
  .catch(error => {
    console.error('Error adding item to cart:', error);
  });
}

// Modify the addToCartClicked function to include sending data to the server
function addToCartClicked(event) {
  var button = event.target;
  var shopItem = button.parentElement.parentElement.parentElement;
  var title = shopItem.getElementsByClassName("item-title")[0].innerText;
  var price = shopItem.getElementsByClassName("item-price")[0].innerText;
  var imageSrc = shopItem.getElementsByClassName("item-image")[0].src;
  const total=  document.getElementsByClassName("cart-total-price")[0].innerText;
  addItemToCart(title, price, imageSrc);
  sendCartItemToServer(title, price,total); // Add this line to send the data to the server

  // Function to update the total amount
function updateCartTotal() {
  // ... existing logic to calculate total


 

  // Send total to the server here if neede
}

// Rest of your existing code...

// Example function where you update the total amount (you might have a different function for this)
function addToCartClicked(event) {
  // ... existing logic to add items to the cart
}

}
    
            addToCartButtons.forEach(button => {
                button.addEventListener('click', addToCartClicked);
            });
        });
    </script>




    
   

   
</head>

<body>
    



    <nav class="navbar navbar-inverse navbar-fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button class="navbar-toggle" data-toggle="collapse" data-target="#abc">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="First Page.html">Canteen Automation System</a>

            </div>
            <div class="collapse navbar-collapse" id="abc">
                <ul class="nav navbar-nav navbar-right">

                    <li><a href="First Page.html"><span class="glyphicon glyphicon-home"></span> Home</a>
                    </li>
                    <li><a href="login.html"><span class="glyphicon glyphicon-log-out"></span> Logout</a>
                    </li>
                </ul>
            </div>
            

        </div>
    </nav>
    <nav>
        <div class="container">
            <div class="jumbotron"
                style="margin-top: 9%; text-align: center; border-radius: 15px 15px 15px 15px;background-image: rgb(97, 99, 97);">
                <h1>Welcome to Canteen Automation System</h1>
                <p>Every meal is a happy meal</p>
            </div>
        </div>

        <div class="container">
            <div class="row">
                <div class="col-sm-6 col-md-3">
                    <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                        <img class="item-image" src="Vada1.jpg" style="border-radius: 15px 15px 15px 15px;">
                        <div class="caption">
                            <h4 class="item-title"> Vada</h4>
                            <p class="item-price">₹40</p>
                            <div class="addToCartbutton">
                                <button class="btn btn-primary btn-block"
                                    style="position: relative; background-color: rgb(27, 15, 27)">ADD TO
                                    CART</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 col-md-3">
                    <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                        <img class="item-image" src="Paratha5.jpg" style="border-radius: 15px 15px 15px 15px;">
                        <div class="caption">
                            <h4 class="item-title"> Pan Cake</h4>
                            <p class="item-price">₹50</p>
                            <div class="addToCartbutton">
                                <button class="btn btn-primary btn-block" style="position: relative;">ADD TO
                                    CART</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-md-3">
                    <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                        <img class="item-image" src="Aloo Paratha.jpg" style="border-radius: 15px 15px 15px 15px;">
                        <div class="caption">
                            <h4 class="item-title"> Aloo Paratha</h4>
                            <p class="item-price">₹40</p>
                            <div class="addToCartbutton">
                                <button class="btn btn-primary btn-block" style="position: relative;">ADD TO
                                    CART</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-sm-6 col-md-3">
                    <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                        <img class="item-image" src="SEPM 25.jpg" style="border-radius: 15px 15px 15px 15px;">
                        <div class="caption">
                            <h4 class="item-title"> Coffee</h4>
                            <p class="item-price">₹40</p>
                            <div class="addToCartbutton">
                                <button class="btn btn-primary btn-block" style="position: relative;">ADD TO
                                    CART</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                    <img class="item-image" src="SEPM 117.jpg" style="border-radius: 15px 15px 15px 15px;">
                    <div class="caption">
                        <h4 class="item-title"> Samosa</h4>
                        <p class="item-price">₹15</p>
                        <div class="addToCartbutton">
                            <button class="btn btn-primary btn-block" style="position: relative;">ADD TO
                                CART</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                    <img class="item-image" src="tea.jpg" style="border-radius: 15px 15px 15px 15px;">
                    <div class="caption">
                        <h4 class="item-title"> Tea</h4>
                        <p class="item-price">₹10</p>
                        <div class="addToCartbutton">
                            <button class="btn btn-primary btn-block" style="position: relative;">ADD TO
                                CART</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                    <img class="item-image" src="SEPM 22.jpg" style="border-radius: 15px 15px 15px 15px;">
                    <div class="caption">
                        <h4 class="item-title"> Chicken Shawarma</h4>
                        <p class="item-price">₹70</p>
                        <div class="addToCartbutton">
                            <button class="btn btn-primary btn-block" style="position: relative;">ADD TO
                                CART</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                    <img class="item-image" src="SEPM 118.jpg" style="border-radius: 15px 15px 15px 15px;">
                    <div class="caption">
                        <h4 class="item-title"> Veg Momos</h4>
                        <p class="item-price">₹70</p>
                        <div class="addToCartbutton">
                            <button class="btn btn-primary btn-block" style="position: relative;">ADD TO
                                CART</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                    <img class="item-image" src="SEPM 118.jpg" style="border-radius: 15px 15px 15px 15px;">
                    <div class="caption">
                        <h4 class="item-title"> Chicken Momos</h4>
                        <p class="item-price">₹90</p>
                        <div class="addToCartbutton">
                            <button class="btn btn-primary btn-block" style="position: relative;">ADD TO
                                CART</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                    <img class="item-image" src="pohaaa.jpg" style="border-radius: 15px 15px 15px 15px;">
                    <div class="caption">
                        <h4 class="item-title"> Poha</h4>
                        <p class="item-price">₹40</p>
                        <div class="addToCartbutton">
                            <button class="btn btn-primary btn-block" style="position: relative;">ADD TO
                                CART</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                    <img class="item-image" src="Dosa.jpg" style="border-radius: 15px 15px 15px 15px;">
                    <div class="caption">
                        <h4 class="item-title"> Dosa</h4>
                        <p class="item-price">₹40</p>
                        <div class="addToCartbutton">
                            <button class="btn btn-primary btn-block" style="position: relative;">ADD TO
                                CART</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-sm-6 col-md-3">
                <div class="thumbnail" style="text-align: center; border-radius: 15px 15px 15px 15px;">
                    <img class="item-image" src="SEPM 104.jpg" style="border-radius: 15px 15px 15px 15px;">
                    <div class="caption">
                        <h4 class="item-title"> Idli</h4>
                        <p class="item-price">₹30</p>
                        <div class="addToCartbutton">
                            <button class="btn btn-primary btn-block"
                                style="position: relative; border-radius: 15px 15px 15px 15px;">ADD TO
                                CART</button>
                        </div>
                    </div>
                </div>
            </div>



        </div>
        </div>
    </nav>

    <div class="container">
        <div class="jumbotron"
            style="background-image: url('SEPM 123.jpg'); text-align: center; border-radius: 15px 15px 15px 15px;">
            <section class="container content-section">
                <h2 style="text-align: center; margin-top: 10px;text-decoration: underline;" class="section-header">
                    <strong>CART</strong>
                </h2>
                <div class="cart-row">
                    <span class="cart-item cart-header cart-column">ITEM</span>
                    <span class="cart-price cart-header cart-column">PRICE</span>
                    <span class="cart-quantity cart-header cart-column">QUANTITY</span>


                </div>

                
                
                <div class="cartItems"></div>
                <div class="cart-total">
                    <strong class="cart-total-title">Total</strong>
                    <span class="cart-total-price">₹0</span>
                    <span class="remove-items"></span>
                </div>
                

                <a href="payment.html">
                    <div class="purchaseBtn"><button class="btn btn-primary btn-block" style="height: 50px;">CONFIRM
                            ORDER</button></div>
                </a>
                  <!-- Payment options buttons -->
          
                <br>

                
                
            </div>


            </section>

        </div>
    </div>
    <body style="background-image: url('SEPM\ 143.jpg'); background-size: cover; background-repeat: no-repeat; background-attachment: fixed;">

        <!-- Your existing HTML content goes here -->
    
    </body>

    <footer>
        <div class="container-fluid"
            style="background-color: black; text-align: center; padding-bottom: 5px; padding-top: 7px;">
            <b>
                <p style="color:black;">
                    Copyright <span class="glyphicon glyphicon-copyright-mark" style="color: black;"><b> Canteen Automation system
                            
                            All Rights Reserved | Contact Us: 1123434577
                        </b>
                    </span>
                </p>
            </b>

        </div>
    </footer>

</body>
</html>